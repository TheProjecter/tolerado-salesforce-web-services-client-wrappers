#labels Code-Sample
= Introduction =
Using queryMore() partner call requires
 * some setting of headers to stubs for batch size 
 * using a string query locator handle correctly.
 * using query() call first and queryMore() second time.

Code sample below will show, how you can get rid of all that hassle by using ToleradoQuery

= Sample Code =
{{{

// Cached, Recoverable Stub
ToleradoStub pStub = ToleradoStubRegistry.getPartnerStub(new Credential(&quot;username&quot;, &quot;password&quot;));
// Wrapper class for making queryMore calls super easy
// Just pass the SOQL and batch size here, it will take care of the rest
ToleradoQuery q = new ToleradoQuery(pStub, &quot;Select name From lead&quot;,
                            250);    
// Do Java style iteration over the ToleradoQuery
while (q.hasMoreRecords()) {
    // Correct query locator used internally 
    SObject[] records = q.getRecords();
    if (records == null || records.length == 0)  break;
    for(sObject lead : records) {
        System.out.println(lead.get_any()[0].getValue());
    }            
            log.debug(&quot;Fetched next &quot; + records.length + &quot; records !&quot;);
    }
// No try catch block as run time exception is thrown, if the stub can't recover
// the error. 

}}}